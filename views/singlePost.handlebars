<div class="post">

  <h2>{{post.title}}</h2>

  <p class="post-meta">Posted by
    {{post.user.username}}

    {{#if (compareDates post.updated_at post.created_at) }}
      Updated on {{format_date post.updated_at}}

    {{else}}
      Posted on {{format_date post.created_at}}</p>
    {{/if}}

  <p>{{post.content}}</p>

  {{#if usersPost}}
    <a href="/post/{{post.id}}/edit"><button>Edit</button></a>
    <button onclick="deletePostHandler('{{post.id}}')">Delete</button>
  {{/if}}


</div>

<div class="comments">
  <h3>Comments</h3>
  {{#if loggedIn}}

    <form action="/api/comments" method="POST">
      <label for="comment">Leave a Comment:</label>
      <textarea id="commentText" name="text" required></textarea>
      <input type="hidden" name="post_id" value="{{post.id}}" />
      <button onclick="addCommentHandler()">Add Comment</button>
    </form>

  {{else}}
    <p>Login to leave a comment.</p>
  {{/if}}

  {{#if post.comments.length}}

    <ul>
      {{#each post.comments as |comment|}}
        <li>
          <p class="comment-meta">Comment by
            {{comment.user.username}}
            on
            {{format_date comment.created_at}}</p>
          <p>{{comment.text}}</p>
        </li>
      {{/each}}
    </ul>

  {{else}}
    <p>No comments yet.</p>
  {{/if}}

</div>

<script src="/js/deletePost.js"></script>
<script src="/js/addComment.js"></script>